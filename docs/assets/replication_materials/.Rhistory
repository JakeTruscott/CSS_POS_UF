for (i in c(1990:2024)){
temp_year <- i
dir.create(file.path(directory, i))
}
list.files(directory)
list.files(directory)
c(1990:2024)
file.path(directory, '1990')
paste0(directory, '/', '1990')
for (i in c(1990:2024)){
dir.create(file.path(directory, i))
print(i)
}
set.seed(1234)
c <- runif(1000, min = 0 , max = 1000)
summary(c)
c
c <- data.frame(value = c)
c %>%
ggplot(aes(x = value)) +
geom_density()
c %>%
ggplot(aes(x = value)) +
geom_histogram()
data.frame(value = runif(1000, min = 0, max = 1000)) %>%
ggplot(aes(x = value)) +
geom_density()
set.seed(1234)
normal <- rnorm(n = 1000,
mean = 50,
sd = 10)
normal <- rnorm(n = 1000,
mean = 50,
sd = 10)
normal <- data.frame(x = normal)
normal
ggplot(data = normal, aes(x = x)) +
geom_density()
hist(normal$x)
### Generating Distributions (Standard Normal -- Ex)
```{r normal_distribution, echo=TRUE, tidy=TRUE}
normal <- rnorm(1000, mean = 25, sd = 10)
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 50, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 25, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 25, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
scale_x_continuous(breaks = seq(5, 55, 5)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 25, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
scale_x_continuous(breaks = seq(5, 45, 5)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 25, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
scale_x_continuous(breaks = seq(-5, 55, 5)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
data.frame(value = normal) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1) +
stat_function(fun = function(x) dnorm(x, mean = 25, sd = 10) * length(normal) * diff(range(normal))/30,
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
scale_y_continuous(breaks = seq(25, 100, 25)) +
scale_x_continuous(breaks = seq(-5, 55, 10)) +
default_ggplot_theme +
theme(axis.text.y = element_blank())
normal <- rexp(1000, rate = 2)
exp <- rexp(1000, rate = 2)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
geom_vline(xintercept = 25, linetype = 2, colour = 'black', linewidth = 1)
exp <- rexp(1000, rate = 0.5)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(count)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
stat_function(fun = function(x) dexp(x, rate = 0.5),
color = "red", size = 1)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(density)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
stat_function(fun = function(x) dexp(x, rate = 0.5),
color = "red", size = 1)
exp <- rexp(1000, rate = 2)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(density)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
stat_function(fun = function(x) dexp(x, rate = 2),
color = "red", size = 1)
data.frame(value = exp) %>%
ggplot(aes(x = value)) +
geom_histogram(aes(y = after_stat(density)), fill = 'skyblue4', colour = 'black', bins = 30, alpha = 1/2) +
stat_function(fun = function(x) dexp(x, rate = 2),
color = "red", size = 1) +
geom_hline(yintercept = 0) +
labs(x = ' ', y = ' ') +
default_ggplot_theme +
theme(axis.text.y = element_blank())
getwd()
library(xml2)
unzip("C:/Users/jaketruscott/Downloads/Ammar Mansuri’s Critical Response Essay.docx", files = c("docProps/core.xml", "docProps/app.xml"), exdir = tempdir())
zip::zip_list("C:/Users/jaketruscott/Downloads/Ammar Mansuri’s Critical Response Essay.docx")
unzip("C:/Users/jaketruscott/Downloads/Ammar Mansuri’s Critical Response Essay.docx",
files = "word/document.xml", exdir = tempdir())
doc_path <- file.path(tempdir(), "word/document.xml")
doc <- read_xml(doc_path)
ns <- xml_ns(doc)  # extract namespaces
# Count insertions and deletions
insertions <- xml_find_all(doc, ".//w:ins", ns)
deletions  <- xml_find_all(doc, ".//w:del", ns)
cat("Insertions:", length(insertions), "\n")
cat("Deletions:", length(deletions), "\n")
tempdir()
file_info <- file.info("C:/Users/jaketruscott/Downloads/Ammar Mansuri’s Critical Response Essay.docx")
file_info[c("ctime", "mtime", "atime")]
file_info <- file.info("C:/Users/jaketruscott/Downloads/Ammar Mansuri’s Critical Response Essay (2) (1).docx")
file_info[c('ctime')]
library(ggplot2)
library(dplyr)
library(cowplot)
library(stargazer)
library(doParallel)
library(parallel)
library(snow)
n = 100000
x1 <- rnorm(n, mean = 0, sd = 1)
x3 <- runif(n, min = -1, max = 1)
x4 <- rnorm(n, mean = 10, sd = 5)
x5 <- rexp(n, rate = 1/2)
y <- 3 + 1.5*x1 - 2*x2 + 0.5*x3 + rnorm(n, mean = 0, sd = 5) # Y is Linear Combination of Predictors + Noise
x1 <- rnorm(n, mean = 0, sd = 1)
x2 <- rnorm(n, mean = 5, sd = 2)
x3 <- runif(n, min = -1, max = 1)
x4 <- rnorm(n, mean = 10, sd = 5)
x5 <- rexp(n, rate = 1/2)
y <- 3 + 1.5*x1 - 2*x2 + 0.5*x3 + rnorm(n, mean = 0, sd = 5) # Y is Linear Combination of Predictors + Noise
sim_data <- data.frame(y, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10)
sim_data <- data.frame(y, x1, x2, x3, x4, x5)
summary(sim_data)
set.seed(1234) # Random Seeds
seeds <- sample(1:100000, size = 100, replace = F)
i = 1
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5))
)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, predict(temp_model, newdata, interval = 'confidence'))
View(predicted_fits)
########################################
# Serial
########################################
serial_output <- data.frame()
for (i in 1:100){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, predict(temp_model, newdata))
serial_output <- bind_rows(serial_output, predicted_fits)
}
predict(temp_model, newdata)
c <- cbind(newdata, fit = predict(temp_model, newdata))
names(c)
########################################
# Serial
########################################
serial_output <- data.frame()
for (i in 1:100){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, fit = predict(temp_model, newdata))
serial_output <- bind_rows(serial_output, predicted_fits)
}
system.time(for (i in 1:100){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, fit = predict(temp_model, newdata))
serial_output <- bind_rows(serial_output, predicted_fits)
})
serial_completion <- system.time(
for (i in 1:5){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, fit = predict(temp_model, newdata))
serial_output <- bind_rows(serial_output, predicted_fits)
})
names(serial_completion)
serial_completion$elapsed
serial_completion[['elapsed']]
serial_completion <- system.time(
for (i in 1:100){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predicted_fits <- cbind(newdata, fit = predict(temp_model, newdata))
serial_output <- bind_rows(serial_output, predicted_fits)
})[['elapsed']]
serial_completion
cores <- c(2, 4, 6)
i = 2
cores <- c(2, 4, 6)
parallel_completion_times <- c()
for (i in cores){
parallel_completion <- system.time({
cl <- makeCluster(i)
doParallel::registerDoParallel(cl)
clusterExport(cl, c('seeds', 'sim_data'))
parallel_run <- parLapply(cl, 1:100, function(i) {
set.seed(seeds[i])
sample_data <- sim_data %>% slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1), max(sim_data$x1), sd(sim_data$x1) * 2),
x2 = seq(min(sim_data$x2), max(sim_data$x2), sd(sim_data$x2) * 2),
x3 = seq(min(sim_data$x3), max(sim_data$x3), sd(sim_data$x3) * 2),
x4 = seq(min(sim_data$x4), max(sim_data$x4), sd(sim_data$x4) * 2),
x5 = seq(min(sim_data$x5), max(sim_data$x5), sd(sim_data$x5) * 2)
)
predict(temp_model, newdata = newdata)
})
stopCluster(cl)
})[['elapsed']]
parallel_completion_times <- c(parallel_completion_times, parallel_completion)
} # Run Parallel
cores <- c(2, 4, 6)
parallel_completion_times <- c()
for (i in cores){
parallel_completion <- system.time({
cl <- makeCluster(i)
doParallel::registerDoParallel(cl)
clusterExport(cl, c('seeds', 'sim_data'))
clusterEvalQ('dplyr')
parallel_run <- parLapply(cl, 1:100, function(i) {
set.seed(seeds[i])
sample_data <- sim_data %>% slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1), max(sim_data$x1), sd(sim_data$x1) * 2),
x2 = seq(min(sim_data$x2), max(sim_data$x2), sd(sim_data$x2) * 2),
x3 = seq(min(sim_data$x3), max(sim_data$x3), sd(sim_data$x3) * 2),
x4 = seq(min(sim_data$x4), max(sim_data$x4), sd(sim_data$x4) * 2),
x5 = seq(min(sim_data$x5), max(sim_data$x5), sd(sim_data$x5) * 2)
)
predict(temp_model, newdata = newdata)
})
stopCluster(cl)
})[['elapsed']]
parallel_completion_times <- c(parallel_completion_times, parallel_completion)
} # Run Parallel
i = 2
cl <- makeCluster(i)
doParallel::registerDoParallel(cl)
clusterExport(cl, c('seeds', 'sim_data'))
clusterEvalQ('dplyr')
cores <- c(2, 4, 6)
parallel_completion_times <- c()
for (i in cores){
parallel_completion <- system.time({
cl <- makeCluster(i)
doParallel::registerDoParallel(cl)
clusterExport(cl, c('seeds', 'sim_data'))
clusterEvalQ(cl, {
library(dplyr)
})
parallel_run <- parLapply(cl, 1:100, function(i) {
set.seed(seeds[i])
sample_data <- sim_data %>% slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1), max(sim_data$x1), sd(sim_data$x1) * 2),
x2 = seq(min(sim_data$x2), max(sim_data$x2), sd(sim_data$x2) * 2),
x3 = seq(min(sim_data$x3), max(sim_data$x3), sd(sim_data$x3) * 2),
x4 = seq(min(sim_data$x4), max(sim_data$x4), sd(sim_data$x4) * 2),
x5 = seq(min(sim_data$x5), max(sim_data$x5), sd(sim_data$x5) * 2)
)
predict(temp_model, newdata = newdata)
})
stopCluster(cl)
})[['elapsed']]
parallel_completion_times <- c(parallel_completion_times, parallel_completion)
} # Run Parallel
parallel_completion_times
summary_serial_parallel <- data.frame(
`Method` = c('Serial', rep('Parallel', 3)),
`Cores` = c(1, cores),
`Completion Time` = c(serial_completion, parallel_completion_times)
)
summary_serial_parallel
summary_serial_parallel <- data.frame(
`Method` = c('Serial', rep('Parallel', 3)),
`Cores` = c(1, cores),
`Completion Time` = c(serial_completion, parallel_completion_times)
) %>%
as_tibble()
stargazer::stargazer(summary_serial_parallel, summary = F, type = 'text')
summary_serial_parallel <- data.frame(
`Method` = c('Serial', rep('Parallel', 3)),
`Cores` = c(1, cores),
`Completion Time` = round(c(serial_completion, parallel_completion_times), 3)
) %>%
as_tibble()
stargazer::stargazer(summary_serial_parallel, summary = F, type = 'text')
predictions <- predict(temP_model, newdata)
n = 100000
x1 <- rnorm(n, mean = 0, sd = 1)
x2 <- rnorm(n, mean = 5, sd = 2)
x3 <- runif(n, min = -1, max = 1)
x4 <- rnorm(n, mean = 10, sd = 5)
x5 <- rexp(n, rate = 1/2)
y <- 3 + 1.5*x1 - 2*x2 + 0.5*x3 + rnorm(n, mean = 0, sd = 5) # Y is Linear Combination of Predictors + Noise
sim_data <- data.frame(y, x1, x2, x3, x4, x5)
summary(sim_data)
set.seed(1234) # Random Seeds
seeds <- sample(1:100000, size = 100, replace = F)
########################################
# Serial
########################################
serial_completion <- system.time(
for (i in 1:100){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data) #
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predictions <- predict(temp_model, newdata)
})[['elapsed']] # Run 100 Times, Recording Completion Time Once Complete
serial_completion
i = 2
parallel_completion <- system.time({
cl <- makeCluster(i)
doParallel::registerDoParallel(cl)
clusterExport(cl, c('seeds', 'sim_data'))
clusterEvalQ(cl, {
library(dplyr)
})
parallel_run <- parLapply(cl, 1:100, function(i) {
set.seed(seeds[i])
sample_data <- sim_data %>% slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data)
newdata <- expand.grid(
x1 = seq(min(sim_data$x1), max(sim_data$x1), sd(sim_data$x1) * 2),
x2 = seq(min(sim_data$x2), max(sim_data$x2), sd(sim_data$x2) * 2),
x3 = seq(min(sim_data$x3), max(sim_data$x3), sd(sim_data$x3) * 2),
x4 = seq(min(sim_data$x4), max(sim_data$x4), sd(sim_data$x4) * 2),
x5 = seq(min(sim_data$x5), max(sim_data$x5), sd(sim_data$x5) * 2)
)
predict(temp_model, newdata = newdata)
})
stopCluster(cl)
})[['elapsed']]
parallel_completion
i =
4
n = 100000
x1 <- rnorm(n, mean = 0, sd = 1)
x2 <- rnorm(n, mean = 5, sd = 2)
x3 <- runif(n, min = -1, max = 1)
x4 <- rnorm(n, mean = 10, sd = 5)
x5 <- rexp(n, rate = 1/2)
y <- 3 + 1.5*x1 - 2*x2 + 0.5*x3 + rnorm(n, mean = 0, sd = 5) # Y is Linear Combination of Predictors + Noise
sim_data <- data.frame(y, x1, x2, x3, x4, x5)
summary(sim_data)
set.seed(1234) # Random Seeds
seeds <- sample(1:100000, size = 100, replace = F)
########################################
# Serial
########################################
serial_completion <- system.time(
for (i in 1:10000){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data) #
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predictions <- predict(temp_model, newdata)
})[['elapsed']] # Run 100 Times, Recording Completion Time Once Complete
########################################
# Serial
########################################
serial_completion <- system.time(
for (i in 1:1000){
set.seed(seeds[i]) # Replication
sample_data <- sim_data %>%
slice_sample(n = 10000)
temp_model <- lm(y ~ x1 + x2 + x3 + x4 + x5, data = sample_data) #
newdata <- expand.grid(
x1 = seq(min(sim_data$x1),max(sim_data$x1), sd(sim_data$x1)*2),
x2 = seq(min(sim_data$x2),max(sim_data$x2), sd(sim_data$x2)*2),
x3 = seq(min(sim_data$x3),max(sim_data$x3), sd(sim_data$x3)*2),
x4 = seq(min(sim_data$x4),max(sim_data$x4), sd(sim_data$x4)*2),
x5 = seq(min(sim_data$x5),max(sim_data$x5), sd(sim_data$x5)*2)
)
predictions <- predict(temp_model, newdata)
})[['elapsed']] # Run 100 Times, Recording Completion Time Once Complete
seeds <- sample(1:100000, size = 1000, replace = F)
